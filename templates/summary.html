<!DOCTYPE html>
<html>
{% if msg %}
  <div style="padding: 10px; background-color: #e0ffe0; border: 1px solid green; margin-bottom: 20px;">
    {{ msg }}
  </div>
{% endif %}

<head>
    <title>Portfolio Summary</title>
</head>
<body>
    <h2>📊 Portfolio Summary</h2>
    <pre>{{ summary_text }}</pre>

<div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
    <form action="{{ url_for('main.upload') }}" method="get">
        <button type="submit">⬆️ Upload New Transactions</button>
    </form>

    <p style="font-size: 14px; color: #888; margin: 0;">
        📦 Current Storage Backend: <strong>{{ backend_type }}</strong>
    </p>

    <form action="{{ url_for('settings') }}" method="get">
        <button type="submit">⚙️ Switch Backend</button>
    </form>
{% if session.get('user') %}
    <p>
        Logged in as <strong>{{ session.get('user') }}</strong>
        | <a href="{{ url_for('auth.logout') }}">Logout</a>
    </p>
{% else %}
     <p>
        <a href="{{ url_for('auth.login') }}">Login</a>
    </p>
{% endif %}

</div>

    <hr>

    <h3>📄 Existing Transactions</h3>
<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            {% for col in transaction_header %}
                <th>{{ col }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for row in transaction_data %}
            <tr>
                {% for cell in row %}
                    <td>{{ cell }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Pagination Controls -->
<div style="margin-top: 20px;">
    {% if page > 1 %}
        <a href="{{ url_for('summary', page=page-1) }}">⬅️ Previous</a>
    {% endif %}
    
    <span>Page {{ page }} of {{ total_pages }}</span>

    {% if page < total_pages %}
        <a href="{{ url_for('summary', page=page+1) }}">Next ➡️</a>
    {% endif %}
</div>
</body>
</html>
